<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shell Collection Gallery - Handcrafted Shell Crafts</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link href="/static/css/styles.css" rel="stylesheet">
    
    <!-- Meta tags for SEO -->
    <meta name="description" content="Discover beautiful handcrafted shell projects including picture frames, shadow boxes, jewelry boxes, and display cases. Click any image to view the original source and tutorial.">
    <meta name="keywords" content="shell crafts, handmade, DIY, picture frames, shadow boxes, jewelry boxes, display cases, coastal decor">
</head>
<body>
    <!-- Header -->
    <header class="coastal-header">
        <div class="container">
            <div class="row">
                <div class="col-12 text-center">
                    <h1 class="display-4 mb-0">
                        <i class="fas fa-shell-icon me-3"></i>
                        Shell Collection Gallery
                    </h1>
                    <p class="lead mt-2 mb-0">Discover Beautiful Handcrafted Shell Projects</p>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container my-5">
        
        <!-- Search Section -->
        <section class="search-section mb-5">
            <div class="row justify-content-center">
                <div class="col-md-10">
                    <div class="search-card">
                        <!-- 1. Text Search -->
                        <div class="search-method mb-4">
                            <h6 class="text-muted mb-2"><strong>1. Text Search</strong></h6>
                            <div class="row g-2">
                                <div class="col-1">
                                    <span class="input-group-text h-100">
                                        <i class="fas fa-search"></i>
                                    </span>
                                </div>
                                <div class="col">
                                    <input type="text" 
                                           id="searchInput" 
                                           class="form-control" 
                                           placeholder="Search shell crafts, frames, boxes..."
                                           aria-label="Search shell crafts">
                                </div>
                                <div class="col-auto">
                                    <button class="btn btn-coastal-primary" type="button" id="searchBtn" style="min-width: 110px; width: 110px;">
                                        <i class="fas fa-search me-1"></i>Search
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- 2. Find Similar Images -->
                        <div class="search-method">
                            <h6 class="text-muted mb-2"><strong>2. Find Similar Images</strong></h6>
                            
                            <!-- Upload Area -->
                            <div class="row g-2 mb-3">
                                <div class="col-md-8">
                                    <div class="upload-area border-2 border-dashed rounded p-3 text-center" id="upload-area">
                                        <input type="file" class="d-none" id="imageUpload" accept="image/*">
                                        <div id="upload-prompt">
                                            <i class="fas fa-camera fa-2x text-muted mb-2"></i>
                                            <p class="mb-1">Upload an image to find similar items</p>
                                            <small class="text-muted">Click to browse or drag and drop</small>
                                        </div>
                                        <div id="upload-preview" class="d-none">
                                            <img id="preview-img" src="" alt="Preview" class="img-thumbnail mb-2" style="max-height: 100px;">
                                            <p class="mb-0 fw-bold" id="preview-name"></p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="d-grid">
                                        <small class="text-muted mb-1">Upload image first</small>
                                    </div>
                                </div>
                            </div>

                            <!-- Keywords Input -->
                            <div class="row g-2 mb-3" id="keywords-section" style="display: none;">
                                <div class="col-1">
                                    <span class="input-group-text h-100">
                                        <i class="fas fa-tags"></i>
                                    </span>
                                </div>
                                <div class="col">
                                    <input type="text" 
                                           id="visualKeywords" 
                                           class="form-control" 
                                           placeholder="Optional: vintage, coastal, handmade, blue..."
                                           aria-label="Descriptive keywords">
                                </div>
                            </div>

                            <!-- Search Type and Button -->
                            <div class="row g-2" id="search-options" style="display: none;">
                                <div class="col-md-8">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="visualSearchType" id="basicVisual" value="basic" checked>
                                        <label class="form-check-label" for="basicVisual">
                                            <strong>Basic Visual Search</strong> - Traditional similarity matching
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="visualSearchType" id="enhancedVisual" value="visual_enhanced">
                                        <label class="form-check-label" for="enhancedVisual">
                                            <strong>AI-Enhanced Search</strong> - AI analyzes image + combines with keywords
                                        </label>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <button class="btn btn-coastal-secondary" type="button" id="findSimilarBtn" style="min-width: 110px; width: 110px;">
                                        <i class="fas fa-images me-1"></i>Find Similar
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Results Grid -->
        <section class="categories-section">
            <!-- Search results will appear here -->
        </section>
    </main>

    <!-- Image Modal -->
    <div class="modal fade" id="imageModal" tabindex="-1" aria-labelledby="imageModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header border-0">
                    <h5 class="modal-title" id="imageModalLabel">Shell Craft Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-6">
                            <img id="modalImage" src="" alt="" class="img-fluid rounded">
                        </div>
                        <div class="col-md-6">
                            <h6 id="modalTitle">Project Title</h6>
                            <p id="modalDescription" class="text-muted">Project description...</p>
                            <div class="project-meta">
                                <span class="badge bg-coastal-secondary me-2" id="modalPlatform">Platform</span>
                                <span class="badge bg-coastal-accent" id="modalCategory">Category</span>
                            </div>
                            <div class="mt-4">
                                <button id="modalSourceBtn" class="btn btn-coastal-primary btn-lg w-100">
                                    <i class="fas fa-external-link-alt me-2"></i>
                                    View Original Source
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Visual Search Modal -->
    <div class="modal fade" id="visualSearchModal" tabindex="-1" aria-labelledby="visualSearchModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header border-0">
                    <h5 class="modal-title" id="visualSearchModalLabel">
                        <i class="fas fa-search-plus me-2"></i>AI-Enhanced Visual Search
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-4">
                        <label class="form-label fw-bold">Upload Image</label>
                        <div class="upload-area border-2 border-dashed rounded p-4 text-center" id="modal-upload-area">
                            <input type="file" class="d-none" id="modalImageUpload" accept="image/*">
                            <div id="modal-upload-prompt">
                                <i class="fas fa-camera fa-3x text-coastal-primary mb-3"></i>
                                <p class="mb-2 fw-bold">Upload an image to find similar items</p>
                                <small class="text-muted">AI will analyze the image and combine it with your keywords</small>
                            </div>
                            <div id="modal-upload-preview" class="d-none">
                                <img id="modal-preview-img" src="" alt="Preview" class="img-thumbnail mb-2" style="max-height: 150px;">
                                <p class="mb-0 fw-bold" id="modal-preview-name"></p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <label for="keywordsInput" class="form-label fw-bold">
                            Descriptive Keywords <span class="text-muted">(Optional)</span>
                        </label>
                        <input type="text" 
                               class="form-control" 
                               id="keywordsInput" 
                               placeholder="e.g., vintage, coastal, handmade, blue, rustic..."
                               aria-label="Descriptive keywords">
                        <div class="form-text">
                            Add keywords to enhance the search. AI will analyze the image and combine it with your descriptions.
                        </div>
                    </div>
                    
                    <div class="alert alert-info d-flex align-items-center">
                        <i class="fas fa-info-circle me-2"></i>
                        <div>
                            <strong>How it works:</strong> AI analyzes your image for style, materials, and colors, then combines this with your keywords for better similarity matching.
                        </div>
                    </div>
                </div>
                <div class="modal-footer border-0">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-coastal-primary" id="startVisualSearch" disabled>
                        <i class="fas fa-search me-2"></i>Find Similar Items
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Error Toast -->
    <div class="toast-container position-fixed bottom-0 end-0 p-3">
        <div id="errorToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="toast-header bg-danger text-white">
                <strong class="me-auto">Error</strong>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div class="toast-body" id="errorToastBody">
                Something went wrong. Please try again.
            </div>
        </div>
    </div>

    <!-- Success Toast -->
    <div class="toast-container position-fixed bottom-0 end-0 p-3">
        <div id="successToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="toast-header bg-success text-white">
                <strong class="me-auto">Success</strong>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div class="toast-body" id="successToastBody">
                Operation completed successfully!
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="coastal-footer mt-5">
        <div class="container">
            <div class="row">
                <div class="col-md-8">
                    <p class="mb-1"><strong>Shell Collection Gallery</strong></p>
                    <p class="text-muted mb-0">
                        Search Everywhere
                    </p>
                </div>
                <div class="col-md-4 text-md-end">
                    <p class="mb-0">
                        <i class="fas fa-heart text-coastal-primary me-2"></i>
                        Made with love for shell craft enthusiasts
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom JavaScript -->
    <script src="/static/js/gallery.js"></script>
</body>
</html>
